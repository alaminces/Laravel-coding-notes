Laravel ржП Forms & CSRF Protection ржорзВрж▓ржд ржлрж░рзНржо рж╕рж╛ржмржорж┐рж╢ржи рж╕рж┐ржХрж┐ржЙрж░ ржХрж░рж╛рж░ ржЬржирзНржп ржмрзНржпржмрж╣рзГржд рж╣рзЯ, ржпрж╛рждрзЗ Cross-Site Request Forgery (CSRF) ржЖржХрзНрж░ржоржг ржарзЗржХрж╛ржирзЛ ржпрж╛рзЯред

1я╕ПтГг CSRF ржХрзА?
CSRF (Cross-Site Request Forgery) рж╣рж▓рзЛ ржПржоржи ржПржХржЯрж┐ ржЖржХрзНрж░ржоржг ржпрзЗржЦрж╛ржирзЗ ржПржХржЬржи ржЖржХрзНрж░ржоржгржХрж╛рж░рзА ржЖржкржирж╛рж░ рж▓ржЧржЗржи рж╕рзЗрж╢ржирзЗрж░ рж╕рзБржпрзЛржЧ ржирж┐рзЯрзЗ ржЖржкржирж╛рж░ ржЕржЬрж╛ржирзНрждрзЗ ржЕржирж╛ржХрж╛ржЩрзНржХрзНрж╖рж┐ржд рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж┐рзЯрзЗ ржжрж┐рждрзЗ ржкрж╛рж░рзЗред
ржЙржжрж╛рж╣рж░ржг: ржЖржкржирж┐ рж▓ржЧржЗржи ржЕржмрж╕рзНржерж╛рзЯ ржерж╛ржХрж╛ржХрж╛рж▓рзАржи ржХрзЛржирзЛ ржорзНржпрж╛рж▓рж┐рж╕рж┐рзЯрж╛рж╕ ржУрзЯрзЗржмрж╕рж╛ржЗржЯрзЗ ржЧрзЗрж▓рзЗ, рж╕рзЗржЯрж┐ ржЖржкржирж╛рж░ рж╣рзЯрзЗ POST рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржкрж╛ржарж┐рзЯрзЗ ржбрж╛ржЯрж╛ржмрзЗржЬ ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рждрзЗ ржкрж╛рж░рзЗред

2я╕ПтГг Laravel ржП CSRF Protection
Laravel ржкрзНрж░рждрж┐ржЯрж┐ POST, PUT, PATCH, ржПржмржВ DELETE рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗрж░ ржЬржирзНржп CSRF ржЯрзЛржХрзЗржи ржЪрзЗржХ ржХрж░рзЗред
ржЯрзЛржХрзЗржи ржорж┐рж▓рзЗ ржирж╛ ржЧрзЗрж▓рзЗ рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯ ржмрж╛рждрж┐рж▓ рж╣рзЯрзЗ ржпрж╛рзЯ (HTTP 419 Error)ред

3я╕ПтГг Blade ржлрж░рзНржорзЗ CSRF Token ржпрзЛржЧ ржХрж░рж╛
Laravel Blade ржП ржлрж░рзНржо рждрзИрж░рж┐ ржХрж░рж╛рж░ рж╕ржорзЯ ржЖржкржирж╛ржХрзЗ @csrf ржбрж┐рж░рзЗржХрзНржЯрж┐ржн ржмрзНржпржмрж╣рж╛рж░ ржХрж░рждрзЗ рж╣ржмрзЗред

<form action="" method="POST">
    @csrf
</form>

ЁЯФ╣ @csrf тЖТ рж╣рж┐ржбрзЗржи ржЗржиржкрзБржЯ ржлрж┐рж▓рзНржбрзЗ ржПржХржЯрж┐ рж░тАНрзНржпрж╛ржирзНржбржо ржЗржЙржирж┐ржХ ржЯрзЛржХрзЗржи ржпрзЛржЧ ржХрж░рзЗ, ржпрж╛ Laravel ржнрзНржпрж╛рж▓рж┐ржбрзЗржЯ ржХрж░рзЗред

4я╕ПтГг Raw HTML ржП CSRF Token ржпрзЛржЧ ржХрж░рж╛
ржпржжрж┐ ржЖржкржирж┐ Blade ржбрж┐рж░рзЗржХрзНржЯрж┐ржн ржмрзНржпржмрж╣рж╛рж░ ржирж╛ ржХрж░рзЗржи, рждрж╛рж╣рж▓рзЗ ржорзНржпрж╛ржирзБрзЯрж╛рж▓рж┐ ржЯрзЛржХрзЗржи ржпрзЛржЧ ржХрж░рждрзЗ рж╣ржмрзЗтАФ
<form method="POST" action="/submit">
    <input type="hidden" name="_token" value="{{ csrf_token() }}">
</form>

5я╕ПтГг CSRF Token ржХрж┐ржнрж╛ржмрзЗ ржнрзНржпрж╛рж▓рж┐ржбрзЗржЯ рж╣рзЯ?

* ржкрзНрж░рждрж┐ржЯрж┐ рж╕рзЗрж╢ржирзЗ Laravel ржПржХржЯрж┐ ржЗржЙржирж┐ржХ ржЯрзЛржХрзЗржи рж░рж╛ржЦрзЗред
* ржлрж░рзНржо рж╕рж╛ржмржорж┐ржЯ рж╣рж▓рзЗ ржкрж╛ржарж╛ржирзЛ _token ржлрж┐рж▓рзНржб рж╕рзЗрж╢ржирзЗрж░ ржЯрзЛржХрзЗржирзЗрж░ рж╕рж╛ржерзЗ ржорж┐рж▓рж┐рзЯрзЗ ржжрзЗржЦрж╛ рж╣рзЯред
* ржпржжрж┐ ржорж┐рж▓ ржирж╛ рж╣рзЯ тЖТ 419 Page Expired ржПрж░рж░ ржжрзЗржЦрж╛ржмрзЗред


7я╕ПтГг AJAX рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ CSRF Token ржкрж╛ржарж╛ржирзЛ
ржпржжрж┐ ржЖржкржирж┐ jQuery AJAX ржмрзНржпржмрж╣рж╛рж░ ржХрж░рзЗржитАФ

<script>
    $.ajaxSetup({
        headers: {
            'X-CSRF-TOKEN': $('meta[name="csrf-token"]').attr('content')
        }
    });
</script>

Blade ржП ржЯрзЛржХрзЗржи рж░рж╛ржЦрждрзЗ рж╣ржмрзЗтАФ
<meta name="csrf-token" content="{{ csrf_token() }}">

8я╕ПтГг ржЧрзБрж░рзБрждрзНржмржкрзВрж░рзНржг ржкрзЯрзЗржирзНржЯ
* Laravel GET рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ CSRF ржЪрзЗржХ ржХрж░рзЗ ржирж╛ред
* рж╕ржмрж╕ржорзЯ POST, PUT, PATCH, DELETE рж░рж┐ржХрзЛрзЯрзЗрж╕рзНржЯрзЗ ржЯрзЛржХрзЗржи ржерж╛ржХрждрзЗ рж╣ржмрзЗред
* @csrf ржмрзНржпржмрж╣рж╛рж░ ржХрж░рж▓рзЗ рж╕рзНржмрзЯржВржХрзНрж░рж┐рзЯржнрж╛ржмрзЗ рж╕рж┐ржХрж┐ржЙрж░рж┐ржЯрж┐ ржмржЬрж╛рзЯ ржерж╛ржХрзЗред



